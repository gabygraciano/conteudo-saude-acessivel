import{i as f,a as v,A as E}from"./font-controls-BdMXK0rp.js";document.addEventListener("DOMContentLoaded",async()=>{f(),await b()});async function b(){const t=new URLSearchParams(window.location.search).get("id"),i=document.getElementById("loading-state"),s=document.getElementById("content-detail");if(!t){h(i,"Conteúdo não encontrado","Nenhum conteúdo foi selecionado.");return}try{const e=await v(t);if(!e){h(i,"Conteúdo não encontrado","O conteúdo que você procura não existe ou foi removido.");return}i.style.display="none",s.style.display="block",document.title=`${e.titulo} - Saúde Acessível`;const l=document.querySelector('meta[name="description"]');l&&l.setAttribute("content",e.resumo);const d=document.getElementById("detail-meta");let o=A(e.categoria);t==="atividade-fisica"&&(o={icon:'<i class="ph ph-person-simple-walk"></i>',text:"Atividade Física"}),d.innerHTML=`
      <span class="content-card__badge content-card__badge--${e.categoria}">
        ${o.icon} ${o.text}
      </span>
    `,document.getElementById("detail-title").textContent=e.titulo,document.getElementById("section-texto").style.display="none",document.getElementById("section-divider-texto").style.display="none",document.getElementById("hero-image").style.display="none",["section-benefits","section-time-goal","section-caution","section-avoid","section-video-reels","section-activities","section-cta-map","section-cta-link","section-imagem"].forEach(m=>{const p=document.getElementById(m);p&&(p.style.display="none")}),e.conteudo_texto&&(document.getElementById("section-texto").style.display="block",document.getElementById("section-divider-texto").style.display="block",document.getElementById("detail-texto").innerHTML=e.conteudo_texto),t==="atividade-fisica"&&(document.getElementById("hero-image").style.display="block"),e.benefit_cards&&_(e.benefit_cards),e.time_goal&&I(e.time_goal),e.caution&&T(e.caution),e.avoid_cards&&B(e.avoid_cards),e.videos&&e.videos.urls&&e.videos.urls.length>0&&M(e.videos),e.activities&&k(e.activities),e.cta&&(e.cta.link_only?x(e.cta):w(e.cta)),e.imagem_url&&(document.getElementById("section-imagem").style.display="block",document.getElementById("detail-imagem").innerHTML=`
        <img src="${e.imagem_url}" alt="${e.imagem_legenda||e.titulo}" loading="lazy" />
        ${e.imagem_legenda?`<div class="image-gallery__caption">${$(e.imagem_legenda)}</div>`:""}
      `)}catch(e){console.error("Erro ao carregar conteúdo:",e),h(i,"Erro ao carregar","Não foi possível carregar o conteúdo. Tente novamente.")}}function _(n){const t=document.getElementById("section-benefits");if(!t)return;t.style.display="block";const i=document.getElementById("benefits-scroll");i.className="benefits-grid-new",i.innerHTML="",n.forEach(s=>{const e=document.createElement("div");e.className="benefit-card-new",e.innerHTML=`
      <strong class="benefit-card-new__title">${s.title}</strong>
    `,i.appendChild(e)})}function I(n){const t=document.getElementById("section-time-goal");if(!t)return;if(t.style.display="block",!t.querySelector(".content-section__title")){const s=document.createElement("h2");s.className="content-section__title flex-title",s.innerHTML='<i class="ph ph-clock content-section__title-icon" aria-hidden="true"></i> Quanto tempo praticar?',t.insertBefore(s,t.firstChild)}const i=document.getElementById("time-goal-card");i.className="time-goal-new",i.innerHTML=`
    <div class="time-goal-new__title">${n.title.replace("A meta ideal:","<strong>A meta ideal:</strong>")}</div>
    <div class="time-goal-new__tip"><strong>${n.tip}</strong></div>
  `}function B(n){const t=document.getElementById("section-avoid");if(!t)return;t.style.display="block";const i=document.getElementById("avoid-grid");i.innerHTML="",n.forEach(s=>{const e=document.createElement("div");e.className="avoid-card",e.innerHTML=`<span>${s}</span>`,i.appendChild(e)})}function k(n){const t=document.getElementById("section-activities");if(!t)return;t.style.display="block";const i=document.getElementById("activities-grid");i.innerHTML="",n.forEach(s=>{const e=document.createElement("div");e.className="activity-tile",e.innerHTML=`
      <span class="activity-tile__icon">${s.icon}</span>
      <strong class="activity-tile__name">${s.name}</strong>
      <span class="activity-tile__tip">${s.tip}</span>
    `,i.appendChild(e)})}function M(n){const t=document.getElementById("section-video-reels");if(!t)return;if(t.style.display="block",n.title){const a=document.getElementById("reels-title");a.innerHTML=`<i class="ph ph-video-camera" style="color: #e53935; margin-right: 8px;" aria-hidden="true"></i> ${n.title}`,a.style.display="block"}if(n.post_text){const a=document.getElementById("reels-post-text");a.innerHTML=n.post_text,a.style.display="block"}const i=n.urls||[],s=document.getElementById("reels-viewport"),e=document.getElementById("reels-indicators");s.innerHTML="";const l=document.getElementById("reels-prev"),d=document.getElementById("reels-next");let o=0;i.forEach((a,c)=>{const u=C(a);if(!u)return;const y=document.createElement("div");y.className=`reels-slide ${c===0?"reels-slide--active":""}`,y.innerHTML=`
      <div class="reels-video-wrapper">
        <iframe src="https://www.youtube.com/embed/${u}?rel=0&modestbranding=1"
          title="Vídeo ${c+1}" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen loading="lazy"></iframe>
      </div>
    `,s.appendChild(y);const g=document.createElement("button");g.className=`reels-dot ${c===0?"reels-dot--active":""}`,g.setAttribute("aria-label",`Ir para vídeo ${c+1}`),g.addEventListener("click",()=>r(c)),e.appendChild(g)});function r(a){const c=s.querySelectorAll(".reels-slide"),u=e.querySelectorAll(".reels-dot");c[o]&&(c[o].classList.remove("reels-slide--active"),u[o].classList.remove("reels-dot--active"),o=a,c[o].classList.add("reels-slide--active"),u[o].classList.add("reels-dot--active"),s.style.transform=`translateX(-${o*100}%)`,l.style.opacity=o===0?"0.3":"1",d.style.opacity=o===c.length-1?"0.3":"1")}l.addEventListener("click",()=>{o>0&&r(o-1)}),d.addEventListener("click",()=>{const a=s.querySelectorAll(".reels-slide");o<a.length-1&&r(o+1)});let m=0;const p=document.getElementById("reels-container");p.addEventListener("touchstart",a=>{m=a.changedTouches[0].screenX},{passive:!0}),p.addEventListener("touchend",a=>{const c=m-a.changedTouches[0].screenX,u=s.querySelectorAll(".reels-slide");Math.abs(c)>50&&(c>0&&o<u.length-1?r(o+1):c<0&&o>0&&r(o-1))},{passive:!0}),l.style.opacity="0.3"}function T(n){const t=document.getElementById("caution-text");if(!t)return;t.style.display="block";let i=n;n.includes("antes de começar.")&&(i=n.replace("Fale com seu médico antes de começar.","<strong>Fale com seu médico antes de começar.</strong>")),t.innerHTML=i.replace(/\n/g,"<br>")}function x(n){const t=document.getElementById("section-cta-link");if(!t)return;t.style.display="block",document.getElementById("cta-link-title").textContent=n.titulo,document.getElementById("cta-link-desc").innerHTML=n.descricao;const i=document.getElementById("cta-link-btn");n.link_url&&(i.href=n.link_url)}function w(n){const t=document.getElementById("section-cta-map");t.style.display="block",document.getElementById("cta-desc-text").textContent=n.descricao;const i=L.map("map-container").setView([-8.0578,-34.8829],12);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',maxZoom:18}).addTo(i);const s=L.divIcon({className:"academia-marker",html:'<div class="academia-marker__pin"><i class="ph-bold ph-barbell"></i></div>',iconSize:[36,36],iconAnchor:[18,36],popupAnchor:[0,-36]}),e=[];E.forEach(o=>{const r=L.marker([o.lat,o.lng],{icon:s}).addTo(i).bindPopup(`
        <div class="map-popup">
          <strong>${o.nome}</strong><br>
          <span class="map-popup__address">${o.endereco}</span><br>
          <span class="map-popup__hours">Seg-sex: 5h30–11h30 / 14h–20h</span>
        </div>
      `);e.push({anchorId:o.nome,marker:r,academia:o})});const l=document.getElementById("btn-locate");let d=null;l.addEventListener("click",()=>{if(!navigator.geolocation){alert("Seu navegador não suporta geolocalização.");return}l.textContent="⏳ Localizando...",l.disabled=!0,navigator.geolocation.getCurrentPosition(o=>{const r=o.coords.latitude,m=o.coords.longitude;if(d)d.setLatLng([r,m]);else{const a=L.divIcon({className:"user-marker",html:'<div class="user-marker__pin"><i class="ph-bold ph-map-pin"></i></div>',iconSize:[36,36],iconAnchor:[18,36],popupAnchor:[0,-36]});d=L.marker([r,m],{icon:a}).addTo(i).bindPopup("<strong>Você está aqui!</strong>").openPopup()}const p=e.map(({marker:a,academia:c})=>{const u=H(r,m,c.lat,c.lng);return{marker:a,academia:c,dist:u}}).sort((a,c)=>a.dist-c.dist)[0];i.setView([r,m],14),p&&p.marker.openPopup(),l.innerHTML='<i class="ph ph-map-pin"></i> Encontrar academia mais próxima',l.disabled=!1},()=>{alert("Não foi possível obter sua localização. Verifique as permissões."),l.innerHTML='<i class="ph ph-map-pin"></i> Encontrar academia mais próxima',l.disabled=!1},{enableHighAccuracy:!0,timeout:1e4})}),setTimeout(()=>i.invalidateSize(),300)}function h(n,t,i){n.innerHTML=`
    <div class="error-state">
      <div class="error-state__icon"><i class="ph ph-smiley-sad"></i></div>
      <h2 class="error-state__title">${t}</h2>
      <p class="error-state__message">${i}</p>
    </div>
  `}function A(n){return{hipertensao:{icon:'<i class="ph ph-heart"></i>',text:"Hipertensão"},diabetes:{icon:'<i class="ph ph-drop"></i>',text:"Diabetes"},geral:{icon:'<i class="ph ph-leaf"></i>',text:"Saúde Geral"}}[n]||{icon:'<i class="ph ph-clipboard-text"></i>',text:n}}function C(n){const t=n.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/);return t?t[1]:null}function $(n){const t=document.createElement("div");return t.textContent=n,t.innerHTML}function H(n,t,i,s){const l=(i-n)*Math.PI/180,d=(s-t)*Math.PI/180,o=Math.sin(l/2)**2+Math.cos(n*Math.PI/180)*Math.cos(i*Math.PI/180)*Math.sin(d/2)**2;return 6371*2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))}
