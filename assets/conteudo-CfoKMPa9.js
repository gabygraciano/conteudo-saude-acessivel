import{i as v,a as h,A as E}from"./font-controls-BqhvTm0w.js";document.addEventListener("DOMContentLoaded",async()=>{v(),await b()});async function b(){const t=new URLSearchParams(window.location.search).get("id"),n=document.getElementById("loading-state"),a=document.getElementById("content-detail");if(!t){y(n,"Conte√∫do n√£o encontrado","Nenhum conte√∫do foi selecionado.");return}try{const e=await h(t);if(!e){y(n,"Conte√∫do n√£o encontrado","O conte√∫do que voc√™ procura n√£o existe ou foi removido.");return}n.style.display="none",a.style.display="block",document.title=`${e.titulo} - Sa√∫de Acess√≠vel`;const r=document.querySelector('meta[name="description"]');r&&r.setAttribute("content",e.resumo);const i=document.getElementById("detail-meta"),s=$(e.categoria);i.innerHTML=`
      <span class="content-card__badge content-card__badge--${e.categoria}">
        ${s.icon} ${s.text}
      </span>
    `,document.getElementById("detail-title").textContent=e.titulo,e.conteudo_texto&&(document.getElementById("section-texto").style.display="block",document.getElementById("section-divider-texto").style.display="block",document.getElementById("detail-texto").innerHTML=e.conteudo_texto),t==="atividade-fisica"&&(document.getElementById("hero-image").style.display="block"),e.benefit_cards&&_(e.benefit_cards),e.time_goal&&I(e.time_goal),e.activities&&B(e.activities),e.tips&&w(e.tips),e.caution&&M(e.caution),e.audio_url&&(document.getElementById("section-audio").style.display="block",document.getElementById("detail-audio").src=e.audio_url),e.video_url&&k(e),e.videos&&e.videos.length>0&&C(e.videos),e.cta&&T(e.cta),e.imagem_url&&(document.getElementById("section-imagem").style.display="block",document.getElementById("detail-imagem").innerHTML=`
        <img src="${e.imagem_url}" alt="${e.imagem_legenda||e.titulo}" loading="lazy" />
        ${e.imagem_legenda?`<div class="image-gallery__caption">${x(e.imagem_legenda)}</div>`:""}
      `)}catch(e){console.error("Erro ao carregar conte√∫do:",e),y(n,"Erro ao carregar","N√£o foi poss√≠vel carregar o conte√∫do. Tente novamente.")}}function _(o){const t=document.getElementById("section-benefits");if(!t)return;t.style.display="block";const n=document.getElementById("benefits-scroll");n.className="benefits-grid-new",n.innerHTML="",o.forEach(a=>{const e=document.createElement("div");e.className="benefit-card-new",e.innerHTML=`
      <strong class="benefit-card-new__title">${a.title}</strong>
    `,n.appendChild(e)})}function I(o){const t=document.getElementById("section-time-goal");if(!t)return;if(t.style.display="block",!t.querySelector(".content-section__title")){const a=document.createElement("h2");a.className="content-section__title flex-title",a.innerHTML='<span class="content-section__title-icon" aria-hidden="true">‚è∞</span> Quanto tempo praticar?',t.insertBefore(a,t.firstChild)}const n=document.getElementById("time-goal-card");n.className="time-goal-new",n.innerHTML=`
    <div class="time-goal-new__title">${o.title.replace("A meta ideal:","<strong>A meta ideal:</strong>")}</div>
    <div class="time-goal-new__tip"><strong>${o.tip}</strong></div>
  `}function B(o){const t=document.getElementById("section-activities");if(!t)return;t.style.display="block";const n=document.getElementById("activities-grid");o.forEach(a=>{const e=document.createElement("div");e.className="activity-tile",e.innerHTML=`
      <span class="activity-tile__icon">${a.icon}</span>
      <strong class="activity-tile__name">${a.name}</strong>
      <span class="activity-tile__tip">${a.tip}</span>
    `,n.appendChild(e)})}function w(o){const t=document.getElementById("section-tips");if(!t)return;t.style.display="block";const n=document.getElementById("tips-container");o.forEach(a=>{const e=document.createElement("div");e.className="tip-pill",e.textContent=a,n.appendChild(e)})}function M(o){const t=document.getElementById("section-caution");if(!t)return;t.style.display="block";let n=o;o.includes("antes de come√ßar.")&&(n=o.replace("Fale com seu m√©dico antes de come√ßar.","<strong>Fale com seu m√©dico antes de come√ßar.</strong>")),document.getElementById("caution-text").innerHTML=n.replace(/\n/g,"<br>")}function k(o){const t=document.getElementById("section-video");t.style.display="block";const n=document.getElementById("detail-video"),a=f(o.video_url);a&&(n.innerHTML=`
      <iframe src="https://www.youtube.com/embed/${a}" title="${o.titulo} - V√≠deo"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
        allowfullscreen loading="lazy"></iframe>
    `)}function C(o){const t=document.getElementById("section-video-reels");t.style.display="block";const n=document.getElementById("reels-viewport"),a=document.getElementById("reels-indicators"),e=document.getElementById("reels-prev"),r=document.getElementById("reels-next");let i=0;o.forEach((d,c)=>{const l=f(d);if(!l)return;const p=document.createElement("div");p.className=`reels-slide ${c===0?"reels-slide--active":""}`,p.innerHTML=`
      <div class="reels-video-wrapper">
        <iframe src="https://www.youtube.com/embed/${l}?rel=0&modestbranding=1"
          title="V√≠deo ${c+1}" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen loading="lazy"></iframe>
      </div>
    `,n.appendChild(p);const g=document.createElement("button");g.className=`reels-dot ${c===0?"reels-dot--active":""}`,g.setAttribute("aria-label",`Ir para v√≠deo ${c+1}`),g.addEventListener("click",()=>s(c)),a.appendChild(g)});function s(d){const c=n.querySelectorAll(".reels-slide"),l=a.querySelectorAll(".reels-dot");c[i].classList.remove("reels-slide--active"),l[i].classList.remove("reels-dot--active"),i=d,c[i].classList.add("reels-slide--active"),l[i].classList.add("reels-dot--active"),n.style.transform=`translateX(-${i*100}%)`,e.style.opacity=i===0?"0.3":"1",r.style.opacity=i===c.length-1?"0.3":"1"}e.addEventListener("click",()=>{i>0&&s(i-1)}),r.addEventListener("click",()=>{const d=n.querySelectorAll(".reels-slide");i<d.length-1&&s(i+1)});let m=0;const u=document.getElementById("reels-container");u.addEventListener("touchstart",d=>{m=d.changedTouches[0].screenX},{passive:!0}),u.addEventListener("touchend",d=>{const c=m-d.changedTouches[0].screenX,l=n.querySelectorAll(".reels-slide");Math.abs(c)>50&&(c>0&&i<l.length-1?s(i+1):c<0&&i>0&&s(i-1))},{passive:!0}),e.style.opacity="0.3"}function T(o){const t=document.getElementById("section-cta-map");t.style.display="block",document.getElementById("cta-desc-text").textContent=o.descricao;const n=L.map("map-container").setView([-8.0578,-34.8829],12);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',maxZoom:18}).addTo(n);const a=L.divIcon({className:"academia-marker",html:'<div class="academia-marker__pin">üèãÔ∏è</div>',iconSize:[36,36],iconAnchor:[18,36],popupAnchor:[0,-36]}),e=[];E.forEach(s=>{const m=L.marker([s.lat,s.lng],{icon:a}).addTo(n).bindPopup(`
        <div class="map-popup">
          <strong>${s.nome}</strong><br>
          <span class="map-popup__address">${s.endereco}</span><br>
          <span class="map-popup__hours">Seg-sex: 5h30‚Äì11h30 / 14h‚Äì20h</span>
        </div>
      `);e.push({anchorId:s.nome,marker:m,academia:s})});const r=document.getElementById("btn-locate");let i=null;r.addEventListener("click",()=>{if(!navigator.geolocation){alert("Seu navegador n√£o suporta geolocaliza√ß√£o.");return}r.textContent="‚è≥ Localizando...",r.disabled=!0,navigator.geolocation.getCurrentPosition(s=>{const m=s.coords.latitude,u=s.coords.longitude;if(i)i.setLatLng([m,u]);else{const c=L.divIcon({className:"user-marker",html:'<div class="user-marker__pin">üìç</div>',iconSize:[36,36],iconAnchor:[18,36],popupAnchor:[0,-36]});i=L.marker([m,u],{icon:c}).addTo(n).bindPopup("<strong>Voc√™ est√° aqui!</strong>").openPopup()}const d=e.map(({marker:c,academia:l})=>{const p=A(m,u,l.lat,l.lng);return{marker:c,academia:l,dist:p}}).sort((c,l)=>c.dist-l.dist)[0];n.setView([m,u],14),d&&d.marker.openPopup(),r.textContent="üìç Encontrar academia mais pr√≥xima",r.disabled=!1},()=>{alert("N√£o foi poss√≠vel obter sua localiza√ß√£o. Verifique as permiss√µes."),r.textContent="üìç Encontrar academia mais pr√≥xima",r.disabled=!1},{enableHighAccuracy:!0,timeout:1e4})}),setTimeout(()=>n.invalidateSize(),300)}function y(o,t,n){o.innerHTML=`
    <div class="error-state">
      <div class="error-state__icon">üòî</div>
      <h2 class="error-state__title">${t}</h2>
      <p class="error-state__message">${n}</p>
    </div>
  `}function $(o){return{hipertensao:{icon:"‚ù§Ô∏è",text:"Hipertens√£o"},diabetes:{icon:"ü©∏",text:"Diabetes"},geral:{icon:"üåø",text:"Sa√∫de Geral"}}[o]||{icon:"üìã",text:o}}function f(o){const t=o.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/);return t?t[1]:null}function x(o){const t=document.createElement("div");return t.textContent=o,t.innerHTML}function A(o,t,n,a){const r=(n-o)*Math.PI/180,i=(a-t)*Math.PI/180,s=Math.sin(r/2)**2+Math.cos(o*Math.PI/180)*Math.cos(n*Math.PI/180)*Math.sin(i/2)**2;return 6371*2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s))}
