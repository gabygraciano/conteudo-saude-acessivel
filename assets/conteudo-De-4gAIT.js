import{i as h,a as f,A as y}from"./font-controls-DgWYExDe.js";document.addEventListener("DOMContentLoaded",async()=>{h(),await _()});async function _(){const t=new URLSearchParams(window.location.search).get("id"),n=document.getElementById("loading-state"),s=document.getElementById("content-detail");if(!t){p(n,"Conteúdo não encontrado","Nenhum conteúdo foi selecionado.");return}try{const e=await f(t);if(!e){p(n,"Conteúdo não encontrado","O conteúdo que você procura não existe ou foi removido.");return}n.style.display="none",s.style.display="block",document.title=`${e.titulo} - Saúde Acessível`;const i=document.querySelector('meta[name="description"]');i&&i.setAttribute("content",e.resumo);const c=document.getElementById("detail-meta");let a=M(e.categoria);t==="atividade-fisica"&&(a={icon:'<i class="ph ph-person-simple-walk"></i>',text:"Atividade Física"}),c.innerHTML=`
      <span class="content-card__badge content-card__badge--${e.categoria}">
        ${a.icon} ${a.text}
      </span>
    `,document.getElementById("detail-title").textContent=e.titulo,e.conteudo_texto&&(document.getElementById("section-texto").style.display="block",document.getElementById("section-divider-texto").style.display="block",document.getElementById("detail-texto").innerHTML=e.conteudo_texto),t==="atividade-fisica"&&(document.getElementById("hero-image").style.display="block"),e.benefit_cards&&b(e.benefit_cards),e.time_goal&&v(e.time_goal),e.caution&&E(e.caution),e.cta&&I(e.cta),e.imagem_url&&(document.getElementById("section-imagem").style.display="block",document.getElementById("detail-imagem").innerHTML=`
        <img src="${e.imagem_url}" alt="${e.imagem_legenda||e.titulo}" loading="lazy" />
        ${e.imagem_legenda?`<div class="image-gallery__caption">${x(e.imagem_legenda)}</div>`:""}
      `)}catch(e){console.error("Erro ao carregar conteúdo:",e),p(n,"Erro ao carregar","Não foi possível carregar o conteúdo. Tente novamente.")}}function b(o){const t=document.getElementById("section-benefits");if(!t)return;t.style.display="block";const n=document.getElementById("benefits-scroll");n.className="benefits-grid-new",n.innerHTML="",o.forEach(s=>{const e=document.createElement("div");e.className="benefit-card-new",e.innerHTML=`
      <strong class="benefit-card-new__title">${s.title}</strong>
    `,n.appendChild(e)})}function v(o){const t=document.getElementById("section-time-goal");if(!t)return;if(t.style.display="block",!t.querySelector(".content-section__title")){const s=document.createElement("h2");s.className="content-section__title flex-title",s.innerHTML='<i class="ph ph-clock content-section__title-icon" aria-hidden="true"></i> Quanto tempo praticar?',t.insertBefore(s,t.firstChild)}const n=document.getElementById("time-goal-card");n.className="time-goal-new",n.innerHTML=`
    <div class="time-goal-new__title">${o.title.replace("A meta ideal:","<strong>A meta ideal:</strong>")}</div>
    <div class="time-goal-new__tip"><strong>${o.tip}</strong></div>
  `}function E(o){const t=document.getElementById("section-caution");if(!t)return;t.style.display="block";let n=o;o.includes("antes de começar.")&&(n=o.replace("Fale com seu médico antes de começar.","<strong>Fale com seu médico antes de começar.</strong>")),document.getElementById("caution-text").innerHTML=n.replace(/\n/g,"<br>")}function I(o){const t=document.getElementById("section-cta-map");t.style.display="block",document.getElementById("cta-desc-text").textContent=o.descricao;const n=L.map("map-container").setView([-8.0578,-34.8829],12);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',maxZoom:18}).addTo(n);const s=L.divIcon({className:"academia-marker",html:'<div class="academia-marker__pin"><i class="ph-bold ph-barbell"></i></div>',iconSize:[36,36],iconAnchor:[18,36],popupAnchor:[0,-36]}),e=[];y.forEach(a=>{const r=L.marker([a.lat,a.lng],{icon:s}).addTo(n).bindPopup(`
        <div class="map-popup">
          <strong>${a.nome}</strong><br>
          <span class="map-popup__address">${a.endereco}</span><br>
          <span class="map-popup__hours">Seg-sex: 5h30–11h30 / 14h–20h</span>
        </div>
      `);e.push({anchorId:a.nome,marker:r,academia:a})});const i=document.getElementById("btn-locate");let c=null;i.addEventListener("click",()=>{if(!navigator.geolocation){alert("Seu navegador não suporta geolocalização.");return}i.textContent="⏳ Localizando...",i.disabled=!0,navigator.geolocation.getCurrentPosition(a=>{const r=a.coords.latitude,m=a.coords.longitude;if(c)c.setLatLng([r,m]);else{const l=L.divIcon({className:"user-marker",html:'<div class="user-marker__pin"><i class="ph-bold ph-map-pin"></i></div>',iconSize:[36,36],iconAnchor:[18,36],popupAnchor:[0,-36]});c=L.marker([r,m],{icon:l}).addTo(n).bindPopup("<strong>Você está aqui!</strong>").openPopup()}const u=e.map(({marker:l,academia:d})=>{const g=B(r,m,d.lat,d.lng);return{marker:l,academia:d,dist:g}}).sort((l,d)=>l.dist-d.dist)[0];n.setView([r,m],14),u&&u.marker.openPopup(),i.innerHTML='<i class="ph ph-map-pin"></i> Encontrar academia mais próxima',i.disabled=!1},()=>{alert("Não foi possível obter sua localização. Verifique as permissões."),i.innerHTML='<i class="ph ph-map-pin"></i> Encontrar academia mais próxima',i.disabled=!1},{enableHighAccuracy:!0,timeout:1e4})}),setTimeout(()=>n.invalidateSize(),300)}function p(o,t,n){o.innerHTML=`
    <div class="error-state">
      <div class="error-state__icon"><i class="ph ph-smiley-sad"></i></div>
      <h2 class="error-state__title">${t}</h2>
      <p class="error-state__message">${n}</p>
    </div>
  `}function M(o){return{hipertensao:{icon:'<i class="ph ph-heart"></i>',text:"Hipertensão"},diabetes:{icon:'<i class="ph ph-drop"></i>',text:"Diabetes"},geral:{icon:'<i class="ph ph-leaf"></i>',text:"Saúde Geral"}}[o]||{icon:'<i class="ph ph-clipboard-text"></i>',text:o}}function x(o){const t=document.createElement("div");return t.textContent=o,t.innerHTML}function B(o,t,n,s){const i=(n-o)*Math.PI/180,c=(s-t)*Math.PI/180,a=Math.sin(i/2)**2+Math.cos(o*Math.PI/180)*Math.cos(n*Math.PI/180)*Math.sin(c/2)**2;return 6371*2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}
